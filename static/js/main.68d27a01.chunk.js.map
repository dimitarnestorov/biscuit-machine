{"version":3,"sources":["BiscuitMachine/locations.module.scss","BiscuitMachine/config.module.scss","BiscuitMachine/Cookie/Cookie.tsx","BiscuitMachine/MachineState.ts","BiscuitMachine/ConeyorBelt/ConveyorBelt.tsx","BiscuitMachine/Location.ts","BiscuitMachine/MachineStore.ts","BiscuitMachine/Controls/Controls.tsx","BiscuitMachine/Extruder/Extruder.tsx","BiscuitMachine/Stamper/Stamper.tsx","BiscuitMachine/Slide/Slide.tsx","BiscuitMachine/BiscuitMachine.tsx","reportWebVitals.ts","mobxConfiguration.ts","index.tsx"],"names":["module","exports","cookieTransformTransitionDuration","Number","config","output","Cookie","isStamped","location","svgRef","useRef","spring","useSpring","duration","x","useState","isMounted","setIsMounted","useEffect","CSSTransition","in","timeout","classNames","nodeRef","xmlns","version","viewBox","fill","stroke","strokeWidth","data-location","className","ref","path","d","to","range","MachineState","strokeDasharray","strokeDasharrayString","join","pathLength","ConveyorBelt","xmlnsXlink","id","cx","cy","r","width","height","y","maskContentUnits","maskUnits","xlinkHref","strokeDashoffset","mask","Location","locations","underExtruder","underStamper","afterStamper","inOven1","inOven2","afterOven","slide","tickMilliseconds","movingMilliseconds","pausedMilliseconds","maxDough","process","initialDough","cookieCost","uuid","UnderExtruder","this","Slide","Error","isCookieUnderExtruder","cookie","MachineStore","action","bound","intervalId","nextTickTimestamp","nextMotorStateChangeTimestamp","runInAction","reset","clearInterval","shouldMoveIfNotPaused","Infinity","isStamperStamping","isMotorMoving","createCookie","timestamp","Date","now","updateNextTickTimestamp","updateNextMotorStateChangeTimestamp","setInterval","handleTick","shouldMove","state","moveConveyor","stampCookie","dough","cookies","find","Math","max","push","movingCookies","i","length","splice","move","Boolean","stamp","newState","startInterval","observable","Off","context","createContext","useMachineStore","store","useContext","MachineStoreProvider","Provider","Radio","value","machineState","useObserver","handleChange","useCallback","event","changeState","target","type","name","onChange","checked","Controls","On","Paused","Extruder","easeSinIn","containerRef","requestAnimationFrame","current","classList","add","onClick","refillExtruder","role","aria-label","onAnimationEnd","remove","Stamper","cancelAnimationFrame","onTransitionEnd","strokeLinecap","Cookies","map","key","BiscuitMachine","destroy","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","configure","computedRequiresReaction","observableRequiresReaction","reactionRequiresObservable","enforceActions","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.68d27a01.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"underExtruder\":\"0\",\"underStamper\":\"1\",\"afterStamper\":\"2\",\"inOven1\":\"3\",\"inOven2\":\"4\",\"afterOven\":\"5\",\"slide\":\"6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tickMilliseconds\":\"100\",\"movingMilliseconds\":\"2000\",\"pausedMilliseconds\":\"2000\"};","import React, { useEffect, useRef, useState } from 'react'\nimport { useSpring, animated } from 'react-spring'\nimport { CSSTransition } from 'react-transition-group'\n\nimport Location from '../Location'\n\nimport config from '../config.module.scss'\n\nimport './Cookie.scss'\n\nconst cookieTransformTransitionDuration = Number(config.cookieTransformTransitionDuration)\n\nconst output = [\n\t'm 305.26371,113.80958 c 0.38403,-2.34869 0.67803,-4.72546 0.88202,-7.13032 0.21314,-2.53258 2.03793,-5.09292 2.03989,-7.68102 0.0185,-51.050675 -43.69263,-92.4450081 -95.50115,-92.4450081 -51.80853,0 -93.23004,40.2495071 -93.21151,91.3001821 0,2.375096 -0.48162,5.872696 -0.30003,8.203166 0.20223,2.61609 0.51301,5.20042 0.93235,7.753 z',\n\t'm 305.26371,113.80958 c 18.31106,-0.1074 43.5971,-0.53988 64.52546,-0.36563 22.34474,-0.57631 51.2027,4.4202 50.74169,-12.46629 0.0202,-20.994599 -92.26315,-14.98101 -207.25545,-14.98101 -114.992291,0 -209.0834923,-4.80881 -208.5979772,13.160987 0,17.496923 51.8022192,14.002373 77.7997292,14.960893 3.70639,0.14531 34.539638,-0.44669 37.628118,-0.30895 z',\n]\n\nexport default function Cookie({ isStamped, location }: { isStamped: boolean; location: Location }) {\n\tconst svgRef = useRef<SVGSVGElement>(null)\n\n\tconst spring = useSpring({ config: { duration: 800 }, x: isStamped ? 1 : 0 })\n\n\tconst [isMounted, setIsMounted] = useState(false)\n\tuseEffect(() => {\n\t\tsetIsMounted(true)\n\t}, [])\n\n\treturn (\n\t\t<CSSTransition\n\t\t\tin={isMounted}\n\t\t\ttimeout={cookieTransformTransitionDuration}\n\t\t\tclassNames=\"cookie\"\n\t\t\tnodeRef={(svgRef as unknown) as React.RefObject<HTMLElement>}\n\t\t>\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tversion=\"1.1\"\n\t\t\t\tviewBox=\"0 0 425.24487 118.77472\"\n\t\t\t\tfill=\"#faa21b\"\n\t\t\t\tstroke=\"#979797\"\n\t\t\t\tstrokeWidth=\"10\"\n\t\t\t\tdata-location={location}\n\t\t\t\tclassName=\"cookie\"\n\t\t\t\tref={svgRef}\n\t\t\t>\n\t\t\t\t<animated.path d={spring.x.to({ range: [0, 1], output })} />\n\t\t\t</svg>\n\t\t</CSSTransition>\n\t)\n}\n","enum MachineState {\n\tOn = 'on',\n\tPaused = 'paused',\n\tOff = 'off',\n}\n\nexport default MachineState\n","import React from 'react'\n\nimport './ConveyorBelt.scss'\n\nconst strokeDasharray = [160, 6]\nconst strokeDasharrayString = [160, 6].join()\nconst pathLength = (strokeDasharray[0] + strokeDasharray[1]) * 16\n\nexport default function ConveyorBelt() {\n\treturn (\n\t\t<svg\n\t\t\tclassName=\"conveyor-belt\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\"\n\t\t\tviewBox=\"0 0 1307 422\"\n\t\t\tfill=\"none\"\n\t\t>\n\t\t\t<defs>\n\t\t\t\t<circle id=\"tail-pulley-path\" cx=\"1250\" cy=\"125\" r=\"39\" />\n\t\t\t\t<circle id=\"secondary-pulley-path\" cx=\"104.5\" cy=\"125.5\" r=\"84.5\" />\n\t\t\t\t<circle id=\"primary-pulley-path\" cx=\"292\" cy=\"341\" r=\"35\" />\n\t\t\t\t<mask\n\t\t\t\t\tid=\"tail-pulley-mask\"\n\t\t\t\t\twidth=\"78\"\n\t\t\t\t\theight=\"78\"\n\t\t\t\t\tx=\"0\"\n\t\t\t\t\ty=\"0\"\n\t\t\t\t\tfill=\"#fff\"\n\t\t\t\t\tmaskContentUnits=\"userSpaceOnUse\"\n\t\t\t\t\tmaskUnits=\"objectBoundingBox\"\n\t\t\t\t>\n\t\t\t\t\t<use xlinkHref=\"#tail-pulley-path\" />\n\t\t\t\t</mask>\n\t\t\t\t<mask\n\t\t\t\t\tid=\"secondary-pulley-mask\"\n\t\t\t\t\twidth=\"169\"\n\t\t\t\t\theight=\"169\"\n\t\t\t\t\tx=\"0\"\n\t\t\t\t\ty=\"0\"\n\t\t\t\t\tfill=\"#fff\"\n\t\t\t\t\tmaskContentUnits=\"userSpaceOnUse\"\n\t\t\t\t\tmaskUnits=\"objectBoundingBox\"\n\t\t\t\t>\n\t\t\t\t\t<use xlinkHref=\"#secondary-pulley-path\" />\n\t\t\t\t</mask>\n\t\t\t\t<mask\n\t\t\t\t\tid=\"primary-pulley-mask\"\n\t\t\t\t\twidth=\"70\"\n\t\t\t\t\theight=\"70\"\n\t\t\t\t\tx=\"0\"\n\t\t\t\t\ty=\"0\"\n\t\t\t\t\tfill=\"#fff\"\n\t\t\t\t\tmaskContentUnits=\"userSpaceOnUse\"\n\t\t\t\t\tmaskUnits=\"objectBoundingBox\"\n\t\t\t\t>\n\t\t\t\t\t<use xlinkHref=\"#primary-pulley-path\" />\n\t\t\t\t</mask>\n\t\t\t</defs>\n\t\t\t<path\n\t\t\t\tclassName=\"conveyor-belt-path\"\n\t\t\t\tstroke=\"#000\"\n\t\t\t\tstrokeDasharray={strokeDasharrayString}\n\t\t\t\tpathLength={pathLength}\n\t\t\t\tstrokeDashoffset=\"-2\"\n\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\td=\"M91 72h1161c29.271 0 53 23.729 53 53s-23.729 53-53 53H91c-29.271 0-53-23.729-53-53s23.729-53 53-53z\"\n\t\t\t/>\n\t\t\t<use\n\t\t\t\tclassName=\"tail-pulley\"\n\t\t\t\tfill=\"#D8D8D8\"\n\t\t\t\tstroke=\"#979797\"\n\t\t\t\tstrokeDasharray=\"26,9\"\n\t\t\t\tstrokeWidth=\"14\"\n\t\t\t\tmask=\"url(#tail-pulley-mask)\"\n\t\t\t\txlinkHref=\"#tail-pulley-path\"\n\t\t\t/>\n\t\t\t<use\n\t\t\t\tclassName=\"secondary-pulley\"\n\t\t\t\tfill=\"#D8D8D8\"\n\t\t\t\tstroke=\"#979797\"\n\t\t\t\tstrokeDasharray=\"100,6\"\n\t\t\t\tstrokeWidth=\"26\"\n\t\t\t\tmask=\"url(#secondary-pulley-mask)\"\n\t\t\t\txlinkHref=\"#secondary-pulley-path\"\n\t\t\t/>\n\t\t\t<g className=\"motor\" fill=\"#48AEDF\" stroke=\"#335475\">\n\t\t\t\t<circle cx=\"292\" cy=\"341\" r=\"77.5\" strokeWidth=\"6\" />\n\t\t\t\t<use\n\t\t\t\t\tclassName=\"primary-pulley\"\n\t\t\t\t\tstrokeDasharray=\"70,3\"\n\t\t\t\t\tstrokeWidth=\"12\"\n\t\t\t\t\tmask=\"url(#primary-pulley-mask)\"\n\t\t\t\t\txlinkHref=\"#primary-pulley-path\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t\t<path\n\t\t\t\tclassName=\"vee-belt\"\n\t\t\t\tstroke=\"#000\"\n\t\t\t\tstrokeDasharray=\"137,4\"\n\t\t\t\tstrokeWidth=\"10\"\n\t\t\t\td=\"M322.185 367.717s0 0 0 0c-14.003 16.036-38.181 18.123-54.724 4.723L47.195 194.028C12.442 165.878 4.33 116.14 28.337 78.407c5.613-8.822 11.763-16.02 18.448-21.591 0 0 0 0 0 0 37.917-31.6 94.272-26.48 125.873 11.438a89.372 89.372 0 017.84 11.004l145.805 241.346c9.019 14.929 7.354 33.975-4.118 47.113 0 0 0 0 0 0z\"\n\t\t\t/>\n\t\t</svg>\n\t)\n}\n","import locations from './locations.module.scss'\n\nenum Location {\n\tUnderExtruder = Number(locations.underExtruder),\n\tUnderStamper = Number(locations.underStamper),\n\tAfterStamper = Number(locations.afterStamper),\n\tInOven1 = Number(locations.inOven1),\n\tInOven2 = Number(locations.inOven2),\n\tAfterOven = Number(locations.afterOven),\n\tSlide = Number(locations.slide),\n}\n\nexport default Location\n","import { action, observable, runInAction } from 'mobx'\nimport { createContext, useContext } from 'react'\nimport { v4 as uuid } from 'uuid'\n\nimport Location from './Location'\nimport MachineState from './MachineState'\n\nimport config from './config.module.scss'\n\nconst tickMilliseconds = Number(config.tickMilliseconds)\nconst movingMilliseconds = Number(config.movingMilliseconds)\nconst pausedMilliseconds = Number(config.pausedMilliseconds)\nconst maxDough = Number(process.env.REACT_APP_MAX_DOUGH)\nconst initialDough = Number(process.env.REACT_APP_INITIAL_DOUGH)\nconst cookieCost = Number(process.env.REACT_APP_COOKIE_COST)\n\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n\tif (initialDough > maxDough) throw new Error('`initialDough` must not be bigger than `maxDough`')\n}\n\nclass Cookie {\n\tid = uuid()\n\tlocation = Location.UnderExtruder\n\tisStamped = false\n\n\tstamp() {\n\t\tthis.isStamped = true\n\t}\n\n\tmove() {\n\t\t/* istanbul ignore next */\n\t\tif (process.env.NODE_ENV && this.location >= Location.Slide) {\n\t\t\tthrow new Error('`move` called after `location` is already set to maximum')\n\t\t}\n\n\t\tthis.location++\n\t}\n}\n\nfunction isCookieUnderExtruder(cookie: Cookie) {\n\treturn cookie.location === Location.UnderExtruder\n}\n\nexport default class MachineStore {\n\t@observable state: MachineState = MachineState.Off\n\t@observable dough = initialDough\n\t@observable cookies: Cookie[] = []\n\n\t// #region Properties with initial value set from reset method\n\t@observable private shouldMoveIfNotPaused!: boolean // Pulse state\n\tprivate intervalId!: ReturnType<typeof setTimeout> | 0\n\tprivate nextTickTimestamp!: number\n\tprivate nextMotorStateChangeTimestamp!: number\n\n\t@observable isStamperStamping!: boolean\n\t@observable isMotorMoving!: boolean\n\t// #endregion\n\n\tconstructor() {\n\t\trunInAction(() => {\n\t\t\tthis.reset()\n\t\t})\n\t}\n\n\tprivate reset() {\n\t\tclearInterval(this.intervalId as Parameters<typeof clearInterval>[0])\n\t\tthis.shouldMoveIfNotPaused = false\n\t\tthis.intervalId = 0\n\t\tthis.nextTickTimestamp = Infinity\n\t\tthis.nextMotorStateChangeTimestamp = Infinity\n\t\tthis.isStamperStamping = false\n\t\tthis.isMotorMoving = false\n\t}\n\n\tprivate startInterval() {\n\t\tif (this.intervalId) return\n\n\t\trunInAction(() => {\n\t\t\tthis.createCookie()\n\t\t\tconst timestamp = Date.now()\n\t\t\tthis.updateNextTickTimestamp(timestamp)\n\t\t\tthis.updateNextMotorStateChangeTimestamp(timestamp)\n\t\t})\n\n\t\tthis.intervalId = setInterval(this.handleTick, tickMilliseconds)\n\t}\n\n\t@action.bound private handleTick() {\n\t\tconst timestamp = Date.now()\n\t\twhile (this.nextTickTimestamp <= timestamp) {\n\t\t\tif (!this.shouldMoveIfNotPaused && !this.shouldMove && this.state === 'off') {\n\t\t\t\tthis.reset()\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\tif (this.nextMotorStateChangeTimestamp <= this.nextTickTimestamp) {\n\t\t\t\tthis.shouldMoveIfNotPaused = !this.shouldMoveIfNotPaused\n\n\t\t\t\tif (this.shouldMoveIfNotPaused) {\n\t\t\t\t\tthis.isStamperStamping = false\n\t\t\t\t\tthis.moveConveyor()\n\t\t\t\t} else {\n\t\t\t\t\tthis.createCookie()\n\t\t\t\t\tthis.stampCookie()\n\t\t\t\t\tthis.isMotorMoving = false\n\t\t\t\t}\n\n\t\t\t\tthis.updateNextMotorStateChangeTimestamp(this.nextMotorStateChangeTimestamp)\n\t\t\t}\n\n\t\t\tthis.updateNextTickTimestamp(this.nextTickTimestamp)\n\t\t}\n\t}\n\n\tprivate updateNextMotorStateChangeTimestamp(timestamp: number) {\n\t\tthis.nextMotorStateChangeTimestamp =\n\t\t\ttimestamp + (this.shouldMoveIfNotPaused ? movingMilliseconds : pausedMilliseconds)\n\t}\n\n\tprivate updateNextTickTimestamp(timestamp: number) {\n\t\tthis.nextTickTimestamp = timestamp + tickMilliseconds\n\t}\n\n\tprivate createCookie() {\n\t\tif (this.state !== 'on') return // Should not create more cookies\n\t\tif (this.dough < cookieCost) return // Not enough dough to create cookie\n\t\tif (this.cookies.find(isCookieUnderExtruder)) return // There is already a cookie under extruder\n\t\tthis.dough = Math.max(this.dough - cookieCost, 0)\n\t\tthis.cookies.push(new Cookie())\n\t}\n\n\tprivate get shouldMove() {\n\t\treturn Boolean(this.cookies.find((cookie) => cookie.location <= Location.Slide))\n\t}\n\n\tprivate moveConveyor() {\n\t\tif (this.state === 'paused' || !this.shouldMove) return\n\n\t\tlet movingCookies = 0\n\t\tfor (let i = this.cookies.length - 1; i >= 0; i--) {\n\t\t\tconst cookie = this.cookies[i]\n\t\t\tconst location = cookie.location\n\t\t\tif (location >= Location.Slide) {\n\t\t\t\tthis.cookies.splice(i, 1)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tcookie.move()\n\t\t\tmovingCookies++\n\t\t}\n\t\tthis.isMotorMoving = Boolean(movingCookies)\n\t}\n\n\tprivate stampCookie() {\n\t\tconst cookie = this.cookies.find((cookie) => cookie.location === 1)\n\t\tif (!cookie || cookie.isStamped) return\n\t\tcookie.stamp()\n\t\tthis.isStamperStamping = true\n\t}\n\n\t@action changeState(newState: MachineState) {\n\t\tthis.state = newState\n\t\tthis.startInterval()\n\t}\n\n\t@action refillExtruder() {\n\t\tthis.dough = maxDough\n\t}\n\n\tdestroy() {\n\t\tclearInterval(this.intervalId as Parameters<typeof clearInterval>[0])\n\t}\n}\n\nconst context = createContext<MachineStore | null>(null)\n\nexport function useMachineStore() {\n\tconst store = useContext(context)\n\tif (!store) throw new Error('Machine store not provided')\n\treturn store\n}\n\nexport const MachineStoreProvider = context.Provider\n","import { useObserver } from 'mobx-react-lite'\nimport React, { useCallback } from 'react'\n\nimport MachineState from '../MachineState'\nimport { useMachineStore } from '../MachineStore'\n\nimport './Controls.scss'\n\nfunction Radio({ value }: { value: MachineState }) {\n\tconst store = useMachineStore()\n\tconst machineState = useObserver(() => store.state)\n\tconst handleChange = useCallback(\n\t\t(event: React.ChangeEvent<HTMLInputElement>) => store.changeState(event.target.value as MachineState),\n\t\t[store],\n\t)\n\n\treturn (\n\t\t<input\n\t\t\ttype=\"radio\"\n\t\t\tname=\"machine-state\"\n\t\t\tvalue={value}\n\t\t\tonChange={handleChange}\n\t\t\tchecked={machineState === value}\n\t\t/>\n\t)\n}\n\nexport default function Controls() {\n\treturn (\n\t\t<ul className=\"controls\">\n\t\t\t<li>\n\t\t\t\t<label>\n\t\t\t\t\t<Radio value={MachineState.On} /> On\n\t\t\t\t</label>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<label>\n\t\t\t\t\t<Radio value={MachineState.Paused} /> Paused\n\t\t\t\t</label>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<label>\n\t\t\t\t\t<Radio value={MachineState.Off} /> Off\n\t\t\t\t</label>\n\t\t\t</li>\n\t\t</ul>\n\t)\n}\n","import { easeSinIn } from 'd3-ease'\nimport { useObserver } from 'mobx-react-lite'\nimport React, { useRef, useEffect } from 'react'\nimport { animated, useSpring } from 'react-spring'\n\nimport { useMachineStore } from '../MachineStore'\n\nimport './Extruder.scss'\n\nconst doughY = 12\nconst doughHeight = 95\n\nexport default function Extruder() {\n\tconst store = useMachineStore()\n\tconst state = useObserver(() => 1 - store.dough / 100)\n\tconst { y } = useSpring({\n\t\ty: doughY + doughHeight * easeSinIn(state), // ease-in because extruder is cone shaped and there is more dough on the top vs the bottom\n\t})\n\n\tconst containerRef = useRef<HTMLDivElement>(null)\n\n\tuseEffect(() => {\n\t\tif (state <= 0) return\n\t\trequestAnimationFrame(() => {\n\t\t\tcontainerRef.current!.classList.add('extruder-extruding')\n\t\t})\n\t}, [state])\n\n\treturn (\n\t\t<div className=\"extruder\" ref={containerRef}>\n\t\t\t<svg\n\t\t\t\tviewBox=\"0 0 161 139\"\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tclassName=\"extruder-svg\"\n\t\t\t>\n\t\t\t\t<animated.mask id=\"extruder-contents-mask\" y={y} maskUnits=\"userSpaceOnUse\">\n\t\t\t\t\t<rect width=\"129\" x=\"16\" y=\"12\" height={doughHeight} fill=\"#FFFFFF\" />\n\t\t\t\t</animated.mask>\n\t\t\t\t<path stroke=\"#979797\" strokeWidth=\"5\" d=\"M102.95 116.5l-10.03 20H69.08l-10.03-20h43.9z\" />\n\t\t\t\t<path stroke=\"#979797\" strokeWidth=\"6\" d=\"M156.866 3l-36.86 113H40.994L4.135 3h152.73z\" />\n\t\t\t\t<path fill=\"#FFA300\" d=\"M16 12h129l-31.103 95H47.103z\" mask=\"url(#extruder-contents-mask)\" />\n\t\t\t</svg>\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 50 50\"\n\t\t\t\tclassName={state === 0 ? 'extruder-refill extruder-refill-hide' : 'extruder-refill'}\n\t\t\t\tonClick={() => store.refillExtruder()}\n\t\t\t\trole=\"button\"\n\t\t\t\taria-label=\"Refill Extruder\"\n\t\t\t>\n\t\t\t\t<path d=\"M50 25c0 4.533-1.117 8.717-3.35 12.55s-5.267 6.867-9.1 9.1C33.717 48.883 29.533 50 25 50c-4.533 0-8.717-1.117-12.55-3.35s-6.867-5.267-9.1-9.1C1.117 33.717 0 29.533 0 25c0-4.533 1.117-8.717 3.35-12.55s5.267-6.867 9.1-9.1C16.283 1.117 20.467 0 25 0c4.533 0 8.717 1.117 12.55 3.35s6.867 5.267 9.1 9.1C48.883 16.283 50 20.467 50 25zm-13 4l9-9h-6c-1-3.067-2.967-5.617-5.9-7.65-2.933-2.033-6.05-3.033-9.35-3-4.367 0-8.1 1.533-11.2 4.6-3.1 3.067-4.65 6.8-4.65 11.2 0 4.4 1.55 8.117 4.65 11.15 3.1 3.033 6.833 4.583 11.2 4.65 4.367.067 8.083-1.467 11.15-4.6l-3.1-3.55C30.6 34.933 28 36 25 36c-3.033 0-5.617-1.083-7.75-3.25S14.033 28 14 25c-.033-3 1.05-5.6 3.25-7.8S22.033 13.933 25 14c3.167 0 5.767 1.067 7.8 3.2.267.267.467.533.6.8.133.267.233.617.3 1.05.067.433.167.75.3.95h-6l9 9z\" />\n\t\t\t</svg>\n\t\t\t<div\n\t\t\t\tclassName=\"extruder-dough\"\n\t\t\t\tonAnimationEnd={() =>\n\t\t\t\t\trequestAnimationFrame(() => containerRef.current!.classList.remove('extruder-extruding'))\n\t\t\t\t}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n","import { useObserver } from 'mobx-react-lite'\nimport React, { useEffect, useRef } from 'react'\n\nimport { useMachineStore } from '../MachineStore'\n\nimport './Stamper.scss'\n\nexport default function Stamper() {\n\tconst ref = useRef<SVGSVGElement>(null)\n\tconst store = useMachineStore()\n\tconst isStamperStamping = useObserver(() => store.isStamperStamping)\n\n\tuseEffect(() => {\n\t\tif (!isStamperStamping) return\n\n\t\tconst id = requestAnimationFrame(() => {\n\t\t\tref.current!.classList.add('stamper-stamp')\n\t\t})\n\n\t\treturn () => cancelAnimationFrame(id)\n\t}, [isStamperStamping])\n\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 161 217\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\"\n\t\t\tstroke=\"#979797\"\n\t\t\tfill=\"#D8D8D8\"\n\t\t\tclassName=\"stamper\"\n\t\t\tonTransitionEnd={() => requestAnimationFrame(() => ref.current!.classList.remove('stamper-stamp'))}\n\t\t\tref={ref}\n\t\t>\n\t\t\t<g className=\"stamper-arm\">\n\t\t\t\t<path strokeWidth=\"4\" d=\"M76 126h10v85H76z\" />\n\t\t\t\t<path strokeWidth=\"4\" d=\"M54 205h54v10H54z\" />\n\t\t\t</g>\n\t\t\t<path strokeWidth=\"5\" d=\"M102.95 116.5l-10.03 20H69.08l-10.03-20h43.9z\" />\n\t\t\t<path strokeWidth=\"6\" d=\"M156.866 3l-36.86 113H40.994L4.135 3h152.73z\" />\n\t\t</svg>\n\t)\n}\n","import React from 'react'\n\nimport './Slide.scss'\n\nexport default function Slide() {\n\treturn (\n\t\t<>\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 268 79\" className=\"slide\">\n\t\t\t\t<path stroke=\"#000\" strokeWidth=\"12\" strokeLinecap=\"square\" d=\"M7.5 7.5 L260 71\" />\n\t\t\t</svg>\n\t\t\t<div className=\"slide-gradient\" />\n\t\t</>\n\t)\n}\n","import { useObserver } from 'mobx-react-lite'\nimport React, { useEffect, useState } from 'react'\n\nimport Cookie from './Cookie'\nimport ConveyorBelt from './ConeyorBelt'\nimport Controls from './Controls'\nimport Extruder from './Extruder'\nimport MachineStore, { MachineStoreProvider, useMachineStore } from './MachineStore'\nimport Stamper from './Stamper'\nimport Slide from './Slide'\n\nimport './BiscuitMachine.scss'\n\nfunction Cookies() {\n\tconst store = useMachineStore()\n\n\treturn (useObserver(() =>\n\t\tstore.cookies.map((cookie) => (\n\t\t\t<Cookie key={cookie.id} isStamped={cookie.isStamped} location={cookie.location} />\n\t\t)),\n\t) as unknown) as JSX.Element\n}\n\nexport default function BiscuitMachine() {\n\tconst [store] = useState(() => new MachineStore())\n\n\tuseEffect(() => {\n\t\treturn () => store.destroy()\n\t}, [store])\n\n\tconst isMotorMoving = useObserver(() => store.isMotorMoving)\n\n\treturn (\n\t\t<MachineStoreProvider value={store}>\n\t\t\t<div className={isMotorMoving ? 'biscuit-machine motor-on' : 'biscuit-machine'}>\n\t\t\t\t<ConveyorBelt />\n\t\t\t\t<Controls />\n\t\t\t\t<Extruder />\n\t\t\t\t<Stamper />\n\t\t\t\t<Cookies />\n\t\t\t\t<Slide />\n\t\t\t</div>\n\t\t</MachineStoreProvider>\n\t)\n}\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n\tif (onPerfEntry && onPerfEntry instanceof Function) {\n\t\timport('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n\t\t\tgetCLS(onPerfEntry)\n\t\t\tgetFID(onPerfEntry)\n\t\t\tgetFCP(onPerfEntry)\n\t\t\tgetLCP(onPerfEntry)\n\t\t\tgetTTFB(onPerfEntry)\n\t\t})\n\t}\n}\n\nexport default reportWebVitals\n","import { configure } from 'mobx'\n\nconfigure({\n\tcomputedRequiresReaction: true,\n\tobservableRequiresReaction: true,\n\treactionRequiresObservable: true,\n\tenforceActions: 'always',\n})\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport BiscuitMachine from './BiscuitMachine'\n\nimport reportWebVitals from './reportWebVitals'\n\nimport './mobxConfiguration'\n\nimport './index.scss'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<BiscuitMachine />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}